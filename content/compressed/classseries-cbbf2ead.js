cbEffects.registerEffect({selector:".js-txt-more",bindFunc:attachTextMoreToggle,});function attachTextMoreToggle(b,d){var d=$(d);if(!d.hasClass("cb-txt-short")){d.addClass("cb-txt-short");if(d.prop("scrollHeight")>d.prop("offsetHeight")){var a=$('<span class="cb-txt-spacer"></span>');d.append(a);var c=$('<span class="cb-txt-more">More</span>');c.on("click",function(e){e.preventDefault();d.toggleClass("cb-txt-long");if(c.text()==="More"){c.text("Less")}else{c.text("More")}});d.append(c)}else{d.addClass("cb-txt-long")}}}(function(){window.cbSocial=window.cbSocial||{};window.cbSocial.updateLikes=function(d,c){$counter_span=$(".count_"+d.data("id"));$counter_span.text(c.count)};window.cbSocial.deleteComment=function(c){if(CB.user_id!==null){CB.delete_comment(c,function(e){var d=$(".comment-"+c);if(d.parent().hasClass("comments-frame")){b(-1)}else{a($("#expand-"+d.parent().attr("id")),-1)}var g=parseInt($(".comments-cnt-"+e.item_id).first().text());g--;console.log(g);$(".comments-cnt-"+e.item_id).text(g);var f=$(".comment-"+c);f.fadeOut(500,function(){f.remove()});$("#replies-"+c).remove();$("#reply-"+c).remove()})}};window.cbSocial.reportComment=function(c){if(CB.user_id!==null){CB.report(c,function(d){console.log(d)})}};window.cbSocial.likeComment=function(d){if(CB.user_id!==null){var c=$("."+d);CB.like(c,function(e){var g=c.hasClass("liked")?-1:1;var f=c.find(".likes-total");f.text(parseInt(f.first().text(),10)+g);c.toggleClass("liked")})}};function b(d){var c=$(".comments-total");c.text(parseInt(c.text(),10)+d)}function a(c,e){var d=+c.data("count")+e;c.addClass("on");c.data("count",d);c.attr("data-count",d);c.find(".reply-count").text(d)}window.updateLikes=window.cbSocial.updateLikes;window.deleteComment=window.cbSocial.deleteComment;window.reportComment=window.cbSocial.reportComment;window.likeComment=window.cbSocial.likeComment})();$(function(){$("[data-toggle=popover]").each(function(c,d){var b=$(d);if(b.closest(".cb-photo-modal").length===0){b.popover({container:"body",})}});$(".js-scrollto-video-tab").on("click",function(){$("html, body").animate({scrollTop:$("#primary").offset().top-90},1000)});$(".js-fetch-chapters-pane").one("click",function(d){var c=$(d.target);var e=$(d.target.getAttribute("href"));var b={tutorialId:e.data("tutorialId"),dataSlug:e.data("dataSlug"),chapterPosition:e.data("chapterPosition"),};$.ajax({url:c.data("asyncSource"),type:"GET",dataType:"json",xhrFields:{withCredentials:true},data:b,success:function(h,f,g){e.append(h.html);window.cbVid.bindChapterCtrls()},error:function(f){console.log("error detected")},})});$(".js-fetch-materials-pane").one("click",function(d){var c=$(d.target);var e=$(d.target.getAttribute("href"));var b={tutorialId:e.data("tutorialId"),chapterId:e.data("chapterId"),};$.ajax({url:c.data("asyncSource"),type:"GET",dataType:"json",xhrFields:{withCredentials:true},data:b,success:function(h,f,g){e.append(h.html)},error:function(f){console.log("error detected")},})});$(".js-fetch-gallery-pane").one("click",function(d){var c=$(d.target);var e=$(d.target.getAttribute("href"));var b={paneId:e.data("paneId"),chapterId:e.data("chapterId"),tutorialId:e.data("tutorialId"),classseriesId:e.data("classseriesId"),};$.ajax({url:c.data("asyncSource"),type:"GET",dataType:"json",xhrFields:{withCredentials:true},data:b,success:function(h,f,g){e.append(h.html);window.cbBind.rebind();cbEffects.bindEffects()},error:function(f){console.log("error detected")},})});window.expandReplies=function(d){var c=$("#reply-"+d);$("#replies-"+d).toggleClass("on");if($("#replies-"+d).hasClass("on")){$("#replies-"+d).html("");CB.comments($("textarea",c),function(e){$("#expand-replies-"+d).data("count",e.comments.count);$("#expand-replies-"+d+" a").html('Collapse Replies (<span class="reply-count">'+e.comments.count+"</span>)");cbEffects.bindEffects()})}else{var b=$("#expand-replies-"+d).data("count");$("#expand-replies-"+d+" a").text("Expand Replies ("+b+")");$("#reply-"+d).removeClass("on")}};window.clickReply=function(b){if(!$("#replies-"+b).hasClass("on")&&!$("#reply-"+b).hasClass("on")){expandReplies(b)}if(CB.user_id!==null){openReply(b,true)}};window.openReply=function(d,b){var c=$("#reply-"+d);if(b){$(c).toggleClass("on")}else{$(c).addClass("on")}if($(c).data("init")){return}$(c).data("init",1);$("textarea",c).change(a);$("textarea",c).keyup(a);$("button",c).bind("click",function(f){if($("textarea",c).val().length<2){return}CB.comment($("textarea",c),function(e){$("textarea",c).css({"min-height":64});$("#replies-"+d).addClass("on");updateReplyCommentCount($("#expand-replies-"+d),1);cbEffects.bindEffects()})})};function a(d){var b=$(d.target).val().split(/\r\n|\r|\n/).length;var c=24+b*22;if(c<64){c=64}if(c>200){c=200}$(d.target).css({"min-height":c})}$("#comment").change(a);$("#comment").keyup(a);$("#save-comment").bind("click",function(b){if($("#comment").val().length<2){return}CB.comment($("#comment"),function(c){$("#comment").css({"min-height":64});$(".comments-frame").show();updateRootCommentCount(1);cbEffects.bindEffects()})});$("#comments-cnt").bind("click",function(){toggleRootComments(this.dataset.id);$("#comments-cnt .list-toggle-icon").toggleClass("open")});$(".show-more-comments").on("click",function(){var b=$(this);if(!$("#comments-cnt .list-toggle-icon").hasClass("open")){$("#comments-cnt").click()}else{CB.comments(b,function(c){updateLastId(c);cbEffects.bindEffects()})}});$(".js-buy-class").on("click",function(b){$.ajax({url:b.target.dataset.buyProduct,success:function(e,c,d){window.location=b.target.dataset.buySuccess},error:function(c){console.log("error detected:",c)},})})});function updateLastId(a){var d=a.comments.comments;var b=$(".show-more-comments");if(d.length<4){b.hide()}else{var c=d[d.length-1].id;b.data("last-id",c);b.attr("data-last-id",c)}}function toggleRootComments(b){var a=4;if($("#comments-cnt .list-toggle-icon").hasClass("open")){$("#"+b+" .comment-reply.on").removeClass("on");$("#"+b+' .expand-replies.on a:contains("Collapse")').click();$("#"+b+" > .comment-container").slice(a).hide()}else{$("#"+b+" > .comment-container").slice(a).show()}}function updateRootCommentCount(b){var a=$(".comments-total");a.text(parseInt(a.text(),10)+b)}function updateReplyCommentCount(a,c){var b=+a.data("count")+c;a.addClass("on");a.data("count",b);a.attr("data-count",b);a.find(".reply-count").text(b)}(function(c){var b={};c.fn.template=function a(d,e){return this.html(c.template(d,e))};c.template=function a(f,g){try{var d=!/\W/.test(f)?b[f]=b[f]||a(document.getElementById(f).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+f.replace(/[\r\t\n]/g,"").split("[!").join("\t").replace(/((^|!\])[^\t]*)'/g,"$1\r").replace(/\t=(.*?)!\]/g,"',$1,'").split("\t").join("');").split("!]").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return g?d(g):d}catch(h){console.log("err:",h)}}})(jQuery);
window.cbUtils=window.cbUtils||{};window.cbUtils.cbForms={formSubmit:function(d,a,c){var d=$(d);var e=d.closest("section");e.find(".success-msg").hide();e.find(".error-msg").hide();var b={};d.find("input").each(function(f,g){if(g.type==="checkbox"&&g.checked){b[g.name]=g.value}else{if(g.type!=="checkbox"){b[g.name]=g.value}}});d.find("textarea").each(function(f,g){b[g.name]=g.value});$.ajax({url:d.attr("action"),type:d.attr("method"),dataType:"json",xhrFields:{withCredentials:true},data:b,success:function(h,f,g){if(h.success){e.find(".form-status .success-msg").show();if(typeof a==="function"){a(h,f,g)}}},error:function(f){var g=JSON.parse(f.responseText);e.find(".form-status .error-msg").html(g.errors[0].message);e.find(".form-status .error-msg").show();if(typeof c==="function"){c(f)}},})},resetForm:function(a){var a=$(a);var b=a.closest(".section");b.find(".success-msg").hide();b.find(".error-msg").hide();a.find("input").each(function(c,d){if(d.hasAttribute("data-orig")){if(d.type==="checkbox"){d.checked=d.dataset.orig==="true"}else{if(d.type!=="checkbox"){d.value=d.dataset.orig}}}});a.find("textarea").each(function(c,d){if(d.hasAttribute("data-orig")){d.value=d.dataset.orig}})},};$(function(){$(".add-to-interests-form").on("click",function(b){b.preventDefault();b.stopPropagation();var a=$(b.target).parent(".add-to-interests-form");window.cbUtils.cbForms.formSubmit(a,addInterestSuccess)});$(".load-more .btn").on("click",function(b){var a=$(b.target);$.ajax({url:location.href,type:"GET",dataType:"json",xhrFields:{withCredentials:true},data:a.data(),success:function(e,c,d){$(".load-more").before(e.data);window.cbUtils.cbSlick.initClassCarousels();if(e.nextDisplayIndex){a.data("nextDisplayIndex",e.nextDisplayIndex)}else{a.addClass("hidden")}},error:function(c){console.log("error detected:",c)},})})});function addInterestSuccess(){$(".add-to-interests-form .interest-cta").toggleClass("hidden")};